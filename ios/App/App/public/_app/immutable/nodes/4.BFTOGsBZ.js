import{a,t as z,c as d,n as ue}from"../chunks/BWrrr2UW.js";import{p as he,u as be,t as N,o as ye,$ as Pe,c as q,r as I,q as xe,f as c,v as s,w as se,a as oe,x as ie,y as X,z as ke}from"../chunks/CIcFpKZC.js";import{d as we,s as Ce}from"../chunks/DXqvFF_9.js";import{p as W,i as l}from"../chunks/CT7FsKwp.js";import{h as De}from"../chunks/Bxxk8_gp.js";import{t as Ae,R as Me,s as Se,f as Le,E as je,a as Be,P as Ee,b as Re,c as Te,C as He,d as Ge,G as Je,e as ze,g as Fe}from"../chunks/DdAoaxhc.js";import{s as Ne,a as le}from"../chunks/XY3jfjSl.js";import{c as qe,i as Ie}from"../chunks/0BgssLRt.js";import{g as Ve}from"../chunks/VSa3Vf03.js";import"../chunks/DPN-45CN.js";async function Ze(V,m,D,G){m.isLoading=!0;try{if(!m.PaymentMethod)throw alert("Please select a payment method"),new Error("Please select a payment method");if(!m.recipient)throw alert("Please select a recipient"),new Error("Please select a recipient");const B=`
				<div style="
					background-color: #f5f5f5;
					padding: 20px;
					border-radius: 8px;
					border: 2px solid #4B7A5B;
					font-family: sans-serif;
				">
					<h3 style="color: #4B7A5B; margin: 0 0 15px 0;">Transfer Completed</h3>
					<div style="display: grid; gap: 10px;">
						<div><span style="color: #666;">Recipient:</span> ${m.recipient.name}</div>
						<div><span style="color: #666;">Amount:</span> €${m.amount}</div>
						<div><span style="color: #666;">Purpose:</span> ${m.Purpose}</div>
						<div><span style="color: #666;">Card Design:</span> ${m.cardDesign}</div>
						<div><span style="color: #666;">Message:</span> ${m.message||"None"}</div>
						<div><span style="color: #666;">Payment:</span> ${m.PaymentMethod}</div>
					</div>
				</div>
			`,u=document.createElement("div");u.innerHTML=B,u.style.cssText=`
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				z-index: 1000;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			`,ke(D,100),document.body.appendChild(u),await new Promise(r=>setTimeout(r,3e3)),u.remove(),await Ve("/transactions")}catch(B){G(5,B.message)}finally{m.isLoading=!1}}var Qe=ue('<svg width="31" height="26" viewBox="0 0 31 26" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-ed4xnn"><path d="M30.9986 11.3326H6.68859L15.5103 2.51096L13.1536 0.154297L0.308594 12.9993L13.1536 25.8443L15.5103 23.4876L6.68859 14.666H30.9986V11.3326Z" fill="black" class="svelte-ed4xnn"></path></svg>'),Ke=ue('<svg width="9" height="16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-ed4xnn"><path d="M7.75 15.75a.744.744 0 0 1-.53-.22l-7-7a.75.75 0 0 1 0-1.06l7-7a.75.75 0 1 1 1.06 1.06L1.81 8l6.47 6.47a.75.75 0 0 1-.53 1.28Z" fill="white" class="svelte-ed4xnn"></path></svg>'),Oe=z('<button class="back-button svelte-ed4xnn"><!></button>'),Ue=z("<button>Continue</button>"),We=(V,m,D,G)=>{switch(m()){case 3:D.Purpose=null;break;case 4:D.cardDesign="default",D.message="";break}X(G)},Xe=z('<button class="skip-button svelte-ed4xnn">Skip</button>'),Ye=z('<button class="submit-button svelte-ed4xnn"> </button>'),$e=z('<article class="transfer-wizard svelte-ed4xnn"><div class="progress-bar svelte-ed4xnn"><div class="progress svelte-ed4xnn"></div></div> <!></article>');function dt(V,m){he(m,!0);const D=Ne(),G=()=>le(qe,"$current",D),B=()=>le(Ie,"$isMobile",D),u=(t,o=oe,g=oe)=>{var M=d(),E=c(M);{var _=P=>{var h=Oe(),f=ie(()=>s(r)>1?ce:()=>history.back());h.__click=function(...n){var i;(i=s(f))==null||i.apply(this,n)};var v=q(h);{var S=n=>{var i=Qe();a(n,i)},p=n=>{var i=Ke();a(n,i)};l(v,n=>{B()?n(p,!1):n(S)})}I(h),a(P,h)},T=P=>{var h=d(),f=c(h);{var v=p=>{var n=Ue();n.__click=K,N(()=>{Te(n,`continue-button ${(A[g()]?"active":"disabled")??""} svelte-ed4xnn`),n.disabled=!A[g()]}),a(p,n)},S=p=>{var n=d(),i=c(n);{var b=x=>{var C=Xe();C.__click=[We,g,e,r],a(x,C)},H=x=>{var C=d(),k=c(C);{var y=L=>{var j=Ye();j.__click=[Ze,e,Q,R];var J=q(j);I(j),N(()=>Ce(J,`Confirm & pay €${e.amount??""}`)),a(L,j)};l(k,L=>{o()==="submit"&&L(y)},!0)}a(x,C)};l(i,x=>{o()==="skip"?x(b):x(H,!1)},!0)}a(p,n)};l(f,p=>{o()==="continue"?p(v):p(S,!1)},!0)}a(P,h)};l(E,P=>{o()==="back"?P(_):P(T,!1)})}a(t,M)};let r=se(1),Z=5,e=W({recipient:null,amount:null,cardDesign:"default",Purpose:null,DeliveryDate:null,PaymentMethod:null,type:null,message:"",searchQuery:"",errors:{},isLoading:!1,currentDate:new Date().toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"2-digit"})}),A=W({1:!1,2:!1,3:!1,4:!1,5:!0}),Y=W([{id:1,name:"James May",email:"jamesmay123@gmail.com",lastSent:"12 Aug 2024",profilePic:"/path/to/profile1.jpg",linkedCard:"ambro-bro1"},{id:2,name:"Richard Hammond",email:"richardhammond@gmail.com",lastSent:"10 Aug 2024",profilePic:"/path/to/profile2.jpg",linkedCard:"card-1234"},{id:3,name:"Jeremy Clarkson",email:"jeremyclarkson@gmail.com",lastSent:"15 Aug 2024",profilePic:"/path/to/profile3.jpg",linkedCard:null},{id:4,name:"James May",email:"jamesmay123@gmail.com",lastSent:"12 Aug 2024",profilePic:"/path/to/profile1.jpg",linkedCard:"ambro-bro2"},{id:5,name:"Richard Hammond",email:"richardhammond@gmail.com",lastSent:"10 Aug 2024",profilePic:"/path/to/profile2.jpg",linkedCard:"card-4334"},{id:6,name:"Jeremy Clarkson",email:"jeremyclarkson@gmail.com",lastSent:"15 Aug 2024",profilePic:"/path/to/profile3.jpg",linkedCard:null}]),Q=se(0),de=ie(()=>s(Q)>0?s(Q):(s(r)/Z-1/Z)*100);function R(t,o){e.errors[t]=o,setTimeout(()=>{delete e.errors[t]},3e3)}function $(t){if(!t){R(1,"Please select a recipient");return}e.recipient=t,A[1]=!0}function K(){A[s(r)]&&s(r)<Z&&X(r)}function ce(){s(r)>1&&X(r,-1)}function ee(t){let o;if(t.target.type==="radio"){const g=document.getElementById("amount");if(g&&g.value.trim()!==""){t.target.checked=!1,R(2,"Please use either fixed amount or custom amount");return}e.type=t.target.id,o=parseFloat(t.target.value.replace("€",""))}else e.type="amount",o=parseFloat(t.target.value),document.querySelectorAll('input[name="fixedAmount"]').forEach(M=>M.checked=!1);if(o<=0||isNaN(o)){R(2,"Please enter a valid amount");return}e.amount=o,A[2]=!0}function te(){if(!e.Purpose){R(3,"Please select a purpose");return}A[3]=!0}function ae(){if(!e.cardDesign||e.cardDesign==="default"){R(4,"Please select a card design");return}A[4]=!0}function re(t){A[5]=t.target.value&&e.PaymentMethod!==null}be(()=>()=>{e.recipient=null,e.amount=null,e.cardDesign="default",e.Purpose=null,e.DeliveryDate=null,e.type=null,e.message=""});var F=$e();De(t=>{N(()=>Pe.title=G())});var O=q(F),me=q(O);I(O);var ve=xe(O,2);{var fe=t=>{var o=d(),g=c(o);{var M=_=>{Me(_,{get recipients(){return Y},get formData(){return e},selected:$,button:u})},E=_=>{var T=d(),P=c(T);{var h=v=>{je(v,{get formData(){return e},validateAmount:ee,nextStep:K,button:u})},f=v=>{var S=d(),p=c(S);{var n=b=>{Ee(b,{get formData(){return e},validatePurpose:te,button:u})},i=b=>{var H=d(),x=c(H);{var C=y=>{He(y,{get formData(){return e},validateCardDesign:ae,button:u})},k=y=>{var L=d(),j=c(L);{var J=w=>{Je(w,{get formData(){return e},validatePayment:re,button:u})};l(j,w=>{s(r)===5&&w(J)},!0)}a(y,L)};l(x,y=>{s(r)===4?y(C):y(k,!1)},!0)}a(b,H)};l(p,b=>{s(r)===3?b(n):b(i,!1)},!0)}a(v,S)};l(P,v=>{s(r)===2?v(h):v(f,!1)},!0)}a(_,T)};l(g,_=>{s(r)===1?_(M):_(E,!1)})}a(t,o)},pe=t=>{var o=d(),g=c(o);{var M=E=>{var _=d(),T=c(_);{var P=f=>{Be(f,{get recipients(){return Y},get formData(){return e},selected:$,button:u})},h=f=>{var v=d(),S=c(v);{var p=i=>{Re(i,{get formData(){return e},validateAmount:ee,nextStep:K,button:u})},n=i=>{var b=d(),H=c(b);{var x=k=>{Ge(k,{get formData(){return e},validatePurpose:te,button:u})},C=k=>{var y=d(),L=c(y);{var j=w=>{ze(w,{get formData(){return e},validateCardDesign:ae,button:u})},J=w=>{var ne=d(),ge=c(ne);{var _e=U=>{Fe(U,{get formData(){return e},validatePayment:re,button:u})};l(ge,U=>{s(r)===5&&U(_e)},!0)}a(w,ne)};l(L,w=>{s(r)===4?w(j):w(J,!1)},!0)}a(k,y)};l(H,k=>{s(r)===3?k(x):k(C,!1)},!0)}a(i,b)};l(S,i=>{s(r)===2?i(p):i(n,!1)},!0)}a(f,v)};l(T,f=>{s(r)===1?f(P):f(h,!1)})}a(E,_)};l(g,E=>{B()&&E(M)},!0)}a(t,o)};l(ve,t=>{B()?t(pe,!1):t(fe)})}I(F),N(()=>Se(me,"style",`width: ${s(de)??""}%`)),Ae(3,F,()=>Le),a(V,F),ye()}we(["click"]);export{dt as component};
